<!DOCTYPE html>
<html lan="en" ng-app="tournament">

<head>
    <% include ../partials/head %>
    <script src="/js/bracket.js"></script>
    <script src="/js/jquery-1.12.2.min.js"></script>
    <script src="/js/jquery.bracket.min.js"></script>
    <link rel="stylesheet" href="/css/jquery.bracket.min.css">
</head>

<body>
<% include ../partials/header %>



    <div></div>
    <script type="text/javascript">

        var tournament = {teams: [], results: []};
        $.get('/api/v1/tournaments/' + window.location.href.split('/')[4] + "/matches", function(data){
//            alert(tournament.teams);
            for (var i = 0; i < data.data.length ; i+=2){
                tournament.teams.push([data.data[i].username1, data.data[i+1].username2 ]);
            }

            $(function() {
                $(' .demo').bracket({
                    init: tournament, /* data to initialize the bracket with */
                    save: null,
                    userData: ' ',
                    onMatchClick: onclick,
                    onMatchHover: onhover,
                    decorator: null,
                    skipSecondaryFinal: false,
                    skipGrandFinalComeback: false,
                    dir: 'lr'
                });
            });

            function saveFn(){
                $.ajax({
                    url: '/script.cgi',
                    type: 'DELETE',
                    success: function(result) {
                        // Do something with the result
                    }
                });
            }

            function onclick(data) {
                $('#matchCallback').text("onclick(data: '" + data + "')")
            }

            function onhover(data, hover) {
                $('#matchCallback').text("onhover(data: '" + data + "', hover: " + hover + ")")
            }

        });

//        {
//            teams : [
//                ["Team 1", "Team 2"], /* first matchup */
//                ["Team 3", "Team 4"]  /* second matchup */
//            ],
//            results : [
//                [[1,2], [3,4]],       /* first round */
//                [[4,6], [2,1]]        /* second round */
//            ]
//        }



    </script>
    <div class="demo"></div>


<% include ../partials/footer %>
</body>
</html>


<!--<svg ng-repeat="name in names track by $index">-->
<!--<g ng-if="{{$index % 2 === 0}}">-->
<!--<rect x="0" y="{{$index * 30}}" width="100" height="20" ></rect>-->
<!--<text x="0" y="{{$index * 30}}" font-family="Verdana" font-size="16" fill="white" > {{ name }}</text>-->
<!--</g>-->
<!--<g ng-if="{{$index % 2 === 1}}">-->
<!--<rect x="0" y="{{($index - 1) * 30 + 20}}" width="100" height="20" ></rect>-->
<!--<text x="0" y="{{($index - 1) * 30 + 20}}" font-family="Verdana" font-size="16" fill="white" > {{ name }} </text>-->
<!--</g>-->
<!--</svg>-->